<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Xanadu Tennis · Recommender (Test v2.1)</title>
  <style>
    :root{--bg:#0f1020;--card:#191a2e;--text:#e9ecf1;--muted:#a9afc3;--brand:#7c3aed}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#0f1020,#12122a);color:var(--text)}
    .wrap{max-width:920px;margin:0 auto;padding:24px}
    .card{background:var(--card);border:1px solid #2a2b48;border-radius:16px;padding:18px;box-shadow:0 6px 24px #00000055}
    h1{margin:0 0 8px;font-size:22px}
    .q{font-weight:700;margin:8px 0 4px}
    .choices{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:10px;margin:10px 0}
    .opt{padding:12px;border-radius:12px;border:1px solid #3a3b5e;background:#1a1b32;cursor:pointer}
    .opt.selected{border-color:var(--brand);box-shadow:0 0 0 2px #7c3aed55 inset}
    .muted{color:var(--muted)}
    .hr{height:1px;background:#2a2b48;margin:14px 0}
    table{width:100%;border-collapse:collapse;margin:8px 0}
    th,td{border:1px solid #32345a;padding:8px;text-align:left}
    th{background:#1a1b32}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}
    .footer{display:flex;gap:10px;justify-content:flex-end;margin-top:14px}
    .btn{border:none;border-radius:12px;padding:10px 12px;background:#2a2b48;color:var(--text);cursor:pointer}
    .btn.primary{background:var(--brand)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="app"></div>
  </div>

<script>
// ===== i18n (单语呈现，选择后整站只用该语言) =====
const STR = {
  zh:{
    title:'课程推荐测试',
    lang:'请选择语言', zh:'中文', en:'English',
    audience:'请选择报名对象', adult:'成人 (14+)', child:'儿童 U14',
    a_level:'请选择成人当前水平', zero:'零基础', basic:'有一定基础', inter:'能对打/发球', adv:'能比赛',
    k_mode:'请选择儿童课程模式', flex:'短期 Flex', longterm:'长期 固定周课',
    next:'下一步', back:'上一步', restart:'重新开始',
    rec:'推荐：',
    tip_adult:'根据您的水平，建议选择以下类型。下方附完整价目表，便于对比。',
    tip_kid:'根据选择的模式，建议如下；下方附完整价目表。',
    price_all:'完整价目表',
    adult_zero:'成人 · 零基础（红球场）', adult_basic:'成人 · 进阶专项（半场）', adult_full:'成人 · 定制训练（全场）',
    kid_flex:'U14 · 短期 Flex', kid_lt:'U14 · 长期固定（半年/一年）',
  },
  en:{
    title:'Course Recommender (Test)',
    lang:'Choose your language', zh:'中文', en:'English',
    audience:'Who is this for?', adult:'Adult (14+)', child:'Child (U14)',
    a_level:'Select your current level', zero:'True beginner', basic:'Some basics', inter:'Can rally/serve', adv:'Match-ready',
    k_mode:'Select course mode', flex:'Short-term Flex', longterm:'Long-term weekly',
    next:'Next', back:'Back', restart:'Restart',
    rec:'Recommendation:',
    tip_adult:'Based on your level, here is a simple recommendation. Full price list below for comparison.',
    tip_kid:'Based on the selected mode. Full price list follows.',
    price_all:'Full Price List',
    adult_zero:'Adults · Zero Beginner (Red court)', adult_basic:'Adults · Skill Focus (Half court)', adult_full:'Adults · Custom (Full court)',
    kid_flex:'U14 · Short-term Flex', kid_lt:'U14 · Long-term (Half/Full year)'
  }
};

// ===== 数据（仅用于展示价目，不做花哨命名） =====
const PRICE = {
  adult_zero:[
    ['1v1 10hr','$800/人','试课$100'],
    ['1v1 20hr','$1550/人','95折'],
    ['1v2 10hr','$1000/共','试课$140'],
    ['1v2 20hr','$1900/共',''],
    ['1v3 15hr','$1500/共','试课$240'],
    ['1v4 15hr','$1800/共','试课$280']
  ],
  adult_basic:[
    ['1v1 10hr','$900/人','试课$110'],
    ['1v1 20hr','$1710/人',''],
    ['1v2 10hr','$1250/共','试课$150'],
    ['1v2 20hr','$2375/共',''],
    ['1v3 15hr','$1500/共','试课$240'],
    ['1v4 15hr','$1800/共','试课$280']
  ],
  adult_full:[
    ['1v1 10hr','$1300/人','试课$140'],
    ['1v1 20hr','$2470/人',''],
    ['1v2 10hr','$1500/共','试课$160'],
    ['1v2 20hr','$2850/共',''],
    ['1v3 15hr','$2400/共','试课$270'],
    ['1v4 15hr','$2800/共','试课$320']
  ],
  kid_flex:[
    ['1v1 10hr','$900/人','试课$100'],
    ['1v2 10hr','$1250/共','试课$140'],
    ['1v3 15hr','$500/人','试课$240'],
    ['1v4 15hr','$450/人','试课$280']
  ],
};

const K_LT = {
  '1v1':{
    '1pw':{'25':['$1875','(75/hr)'],'50':['$3600','(72/hr)']},
    '2pw':{'25':['$3550','(71/hr)'],'50':['$6700','(67/hr)']},
    '3pw':{'25':['$4875','(65/hr)'],'50':['$9300','(62/hr)']},
  },
  '1v2':{
    '1pw':{'25':['$2375','(95/hr)'],'50':['$4600','(92/hr)']},
    '2pw':{'25':['$4550','(91/hr)'],'50':['$8700','(87/hr)']},
    '3pw':{'25':['$6375','(85/hr)'],'50':['$12100','(80.67/hr)']},
  },
  '1v3':{
    '1pw':{'25':['$3000','(120/hr)'],'50':['$5850','(117/hr)']},
    '2pw':{'25':['$5750','(115/hr)'],'50':['$11000','(110/hr)']},
    '3pw':{'25':['$8025','(107/hr)'],'50':['$15500','(103.33/hr)']},
  },
  '1v4-6':{
    '1pw':{'25':['$3650','(146/hr)'],'50':['$7150','(143/hr)']},
    '2pw':{'25':['$7050','(141/hr)'],'50':['$13650','(136.5/hr)']},
    '3pw':{'25':['$10050','(134/hr)'],'50':['$19500','(130/hr)']},
  }
};

const S = {lang:null, audience:null, a_level:null, k_mode:null};
const $app = document.getElementById('app');

function t(k){return STR[S.lang||'zh'][k]}
function opt(label, on){return `<div class="opt" onclick="(${on})()">${label}</div>`}
function table(rows){
  return `<table><thead><tr><th>Package</th><th>Price</th><th>Note</th></tr></thead><tbody>
    ${rows.map(r=>`<tr><td>${r[0]}</td><td>${r[1]}</td><td>${r[2]||''}</td></tr>`).join('')}
  </tbody></table>`
}
function tableKLT(){
  const groups=['1v1','1v2','1v3','1v4-6'];
  const freqs=['1pw','2pw','3pw'];
  const terms=['25','50'];
  let html='';
  groups.forEach(g=>{
    html += `<div class="card"><div class="q">${g}</div><table><thead><tr><th>Freq</th><th>25</th><th>50</th></tr></thead><tbody>`;
    freqs.forEach(f=>{
      const c25=K_LT[g][f]['25'].join(' ');
      const c50=K_LT[g][f]['50'].join(' ');
      html += `<tr><td>${f}</td><td>${c25}</td><td>${c50}</td></tr>`;
    });
    html += `</tbody></table></div>`;
  });
  return html;
}

function render(){
  if(!S.lang){
    $app.innerHTML = `<h1>${STR.en.title} / ${STR.zh.title}</h1>
      <div class="q">${STR.en.lang}</div>
      <div class="choices">${opt(STR.zh.zh,()=>{S.lang='zh';render()})}${opt(STR.en.en,()=>{S.lang='en';render()})}</div>`;return;
  }
  if(!S.audience){
    $app.innerHTML = `<h1>${t('title')}</h1>
      <div class="q">${t('audience')}</div>
      <div class="choices">${opt(t('adult'),()=>{S.audience='adult';render()})}${opt(t('child'),()=>{S.audience='child';render()})}</div>
      <div class="footer"><button class="btn" onclick="S.lang=null;render()">${t('back')}</button></div>`;return;
  }
  if(S.audience==='adult'){
    if(!S.a_level){
      $app.innerHTML = `<h1>${t('title')}</h1>
        <div class="q">${t('a_level')}</div>
        <div class="choices">${opt(t('zero'),()=>{S.a_level='zero';render()})}${opt(t('basic'),()=>{S.a_level='basic';render()})}${opt(t('inter'),()=>{S.a_level='inter';render()})}${opt(t('adv'),()=>{S.a_level='adv';render()})}</div>
        <div class="footer"><button class="btn" onclick="S.audience=null;render()">${t('back')}</button></div>`;return;
    }
    // 推荐 + 完整价目（成人三块）
    const recText = S.a_level==='zero'? t('adult_zero') : (S.a_level==='basic'? t('adult_basic') : t('adult_full'));
    $app.innerHTML = `<h1>${t('title')}</h1>
      <div class="q">${t('rec')}</div>
      <div class="card">${recText}</div>
      <p class="muted">${t('tip_adult')}</p>
      <div class="hr"></div>
      <h3>${t('price_all')}</h3>
      <div class="grid">
        <div class="card"><div class="q">${t('adult_zero')}</div>${table(PRICE.adult_zero)}</div>
        <div class="card"><div class="q">${t('adult_basic')}</div>${table(PRICE.adult_basic)}</div>
        <div class="card"><div class="q">${t('adult_full')}</div>${table(PRICE.adult_full)}</div>
      </div>
      <div class="footer"><button class="btn" onclick="S.a_level=null;render()">${t('back')}</button><button class="btn primary" onclick="location.reload()">${t('restart')}</button></div>`;return;
  }
  // U14
  if(S.audience==='child'){
    if(!S.k_mode){
      $app.innerHTML = `<h1>${t('title')}</h1>
        <div class="q">${t('k_mode')}</div>
        <div class="choices">${opt(t('flex'),()=>{S.k_mode='flex';render()})}${opt(t('longterm'),()=>{S.k_mode='longterm';render()})}</div>
        <div class="footer"><button class="btn" onclick="S.audience=null;render()">${t('back')}</button></div>`;return;
    }
    const recText = S.k_mode==='flex'? t('kid_flex') : t('kid_lt');
    $app.innerHTML = `<h1>${t('title')}</h1>
      <div class="q">${t('rec')}</div>
      <div class="card">${recText}</div>
      <p class="muted">${t('tip_kid')}</p>
      <div class="hr"></div>
      <h3>${t('price_all')}</h3>
      <div class="grid">
        <div class="card"><div class="q">${t('kid_flex')}</div>${table(PRICE.kid_flex)}</div>
        <div class="card"><div class="q">${t('kid_lt')}</div>${tableKLT()}</div>
      </div>
      <div class="footer"><button class="btn" onclick="S.k_mode=null;render()">${t('back')}</button><button class="btn primary" onclick="location.reload()">${t('restart')}</button></div>`;return;
  }
}

render();
</script>

</body>
</html>
